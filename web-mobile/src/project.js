window.__require=function e(t,a,n){function c(o,s){if(!a[o]){if(!t[o]){var r=o.split("/");if(r=r[r.length-1],!t[r]){var u="function"==typeof __require&&__require;if(!s&&u)return u(r,!0);if(i)return i(r,!0);throw new Error("Cannot find module '"+o+"'")}o=r}var g=a[o]={exports:{}};t[o][0].call(g.exports,function(e){return c(t[o][1][e]||e)},g,g.exports,e,t,a,n)}return a[o].exports}for(var i="function"==typeof __require&&__require,o=0;o<n.length;o++)c(n[o]);return c}({CommingObject:[function(e,t,a){"use strict";cc._RF.push(t,"4ca5evdR5dGOqGziqus6iZv","CommingObject");var n=e("StageManager");cc.Class({extends:cc.Component,properties:{_stageManager:null,moveSpeed:500},onLoad:function(){var e=cc.find("Canvas/StageManager");this._stageManager=e.getComponent(n)},update:function(e){if(this._stageManager._state===n.State.RUNNING){var t=(this.moveSpeed+this._stageManager._addSpeed)*e;this.node.x<-.5*cc.winSize.width-this.node.width?this.node.destroy():this.node.x=this.node.x-t}}}),cc._RF.pop()},{StageManager:"StageManager"}],Player:[function(e,t,a){"use strict";cc._RF.push(t,"2e11eyP4oxHkJjoTlQPSqJu","Player");var n=e("StageManager");cc.Class({extends:cc.Component,properties:{stageManager:{default:null,type:n},jumpDurationTime:.6,jumpHeight:200,_isJumping:!1},onLoad:function(){this.setTouchEvent()},onEnable:function(){cc.director.getCollisionManager().enabled=!0},setTouchEvent:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,SwallowTouch:!0,onTouchBegan:function(t,a){return e.jumpPlayer(),!0}},e.node)},jumpPlayer:function(){if(!this._isJumping){var e=this.node.getComponent(cc.Animation);e.play("PlayerJump"),this._isJumping=!0;var t=this,a=cc.jumpBy(this.jumpDurationTime,0,0,this.jumpHeight,1),n=cc.callFunc(function(){t._isJumping=!1,e.play("PlayerRunning")},this);this.node.runAction(cc.sequence(a,n))}},onCollisionEnter:function(e,t){switch(cc.log(e),cc.log("self.tag:"+t.tag+" other.tag:"+e.tag),e.tag){case 1:this.node.stopAllActions(),this.node.runAction(cc.jumpBy(.5,-180,-500,this.jumpHeight,1)),this.enableTouch(!1),this.stageManager.exeGameOver()}},enableTouch:function(e){e?cc.eventManager.resumeTarget(this.node):cc.eventManager.pauseTarget(this.node)}}),cc._RF.pop()},{StageManager:"StageManager"}],SceneScroll:[function(e,t,a){"use strict";cc._RF.push(t,"09201o4J+dAqJ1oEEDDDim+","SceneScroll");var n=e("StageManager");cc.Class({extends:cc.Component,properties:{_stageManager:null,otherbgsprite:{default:null,type:cc.Sprite},moveSpeed:500},onLoad:function(){var e=cc.find("Canvas/StageManager");this._stageManager=e.getComponent(n)},update:function(e){if(this._stageManager._state===n.State.RUNNING){var t=this.moveSpeed*this._stageManager._addSpeed*e;this.node.x<=-this.node.width?this.node.x=this.otherbgsprite.node.x+this.otherbgsprite.node.width-t:this.node.x=this.node.x-t}}}),cc._RF.pop()},{StageManager:"StageManager"}],StageManager:[function(e,t,a){"use strict";cc._RF.push(t,"09c77yPYZlGw5SEOJ5q+Dxw","StageManager");var n=cc.Enum({READY:0,WAITING_WAVE:1,RUNNING:2,GAMEOVER:9});cc.Class({extends:cc.Component,properties:{gameOverLayer:{default:null,type:cc.Node},bloockPrefab:{default:null,type:cc.Prefab},waveLabel:{default:null,type:cc.Label},scorelabel:{default:null,type:cc.Label},stageBGM:{default:null,url:cc.AudioClip},_score:0,_state:n.READY,_bgmId:-1,blockDistance:400,waveBlockMax:10,waveAddSpeed:20,waveMax:15,_wave:1,_addSpeed:0,_addDistance:0},statics:{State:n},onLoad:function(){this.createWave(400+this.blockDistance+this._addDistance),this._state=n.RUNNING,this._bgmId=cc.audioEngine.play(this.stageBGM,!0)},update:function(e){this._state===n.RUNNING&&(this.pulsScore(100*e),this.renewLabel(),this.checkWave())},pulsScore:function(e){this._score+=e},renewLabel:function(){this.waveLabel.string="wave: "+this._wave,this.scorelabel.string="Score "+Math.floor(this._score)},createWave:function(e){for(var t=cc.find("Canvas/Blocks"),a=cc.find("Canvas/GroundA"),n=a.getPosition().y+.5*a.height,c=cc.find("Canvas/Player").getComponent("Player"),i=0;i<this.waveBlockMax;i++){var o,s=cc.instantiate(this.bloockPrefab);switch(t.addChild(s),Math.floor(3*Math.random())){case 0:o=-1;break;case 1:o=0;break;case 2:o=1}var r=this.blockDistance+this._addDistance,u=o<0?0:c.jumpHeight-20,g=e+r*(i+1),l=n+.5*s.height+u;s.setPosition(cc.v2(g,l))}},checkWave:function(){0===cc.find("Canvas/Blocks").getChildrenCount()&&(this._wave++,cc.log(this._addSpeed),cc.log(this._addDistance),cc.log("create"),this.createWave(400))},exeGameOver:function(){cc.director.getCollisionManager().enabled=!1,this._state=n.GAMEOVER,this.gameOverLayer.active=!0,cc.audioEngine.stop(this._bgmId),this._bgmId=-1},restartStage:function(){cc.director.loadScene("RunScene")}}),cc._RF.pop()},{}]},{},["CommingObject","Player","SceneScroll","StageManager"]);